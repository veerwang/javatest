package com.security.landicorp.vulnerabilitydetect;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;

import android.os.IBinder;

import android.support.annotation.NonNull;
import android.support.design.widget.BottomNavigationView;
import android.support.v7.app.AppCompatActivity;
import android.view.MenuItem;

import android.content.Intent;
//import android.content.ServiceConnection;
//import android.content.ComponentName;

import android.widget.TextView;
import android.widget.EditText;
import android.widget.Toast;
//
//import android.content.Context;
//import android.content.SharedPreferences;

import android.util.Log;

import android.view.View;
import android.view.View.OnClickListener;

import android.widget.Button;
import android.widget.LinearLayout;
import android.view.ViewGroup;

import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.webkit.WebSettings;

import java.io.IOException;

public class WebviewActivity extends AppCompatActivity {

    private static final String ACTIVITY_TAG   = "WebviewActivity"; 

    private LinearLayout mLayout;
    private WebView mWebView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_webview);

	LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
        mWebView = new WebView(getApplicationContext());
        mWebView.setLayoutParams(params);
	setContentView(mWebView);

	mWebView.getSettings().setJavaScriptEnabled(true);//支持JavaScriptEnable
 	mWebView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE);//不使用缓存，只从网络获取数据.
        //支持屏幕缩放
        mWebView.getSettings().setSupportZoom(true);
        mWebView.setWebViewClient(new WebViewClient() {
		@Override
			public boolean shouldOverrideUrlLoading(WebView view, String url) {
				// TODO Auto-generated method stub
				view.loadUrl(url);// 使用当前WebView处理跳转
				return true;//true表示此事件在此处被处理，不需要再广播
			}
		@Override	//转向错误时的处理
			public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
				// TODO Auto-generated method stub
				Toast.makeText(WebviewActivity.this, "Oh no! " + description, Toast.LENGTH_SHORT).show();
			}
	});
        mWebView.loadUrl("http://172.27.16.28:8080/api/v1/login");

	Log.v(WebviewActivity.ACTIVITY_TAG,"kevin ---> welcome WebView Create");
    }

    @Override
	    protected void onDestroy() {
		    if (mWebView != null) {
			    mWebView.loadDataWithBaseURL(null, "", "text/html", "utf-8", null);
			    mWebView.clearHistory();

			    ((ViewGroup) mWebView.getParent()).removeView(mWebView);
			    mWebView.destroy();
			    mWebView = null;
		    }
		    super.onDestroy();
	    }
}

