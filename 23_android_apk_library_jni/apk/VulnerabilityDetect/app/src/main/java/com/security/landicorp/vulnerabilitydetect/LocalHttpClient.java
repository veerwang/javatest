package com.security.landicorp.vulnerabilitydetect;

// 一下这些文件是供java调用
//import org.apache.http.client.HttpClient;
//import org.apache.http.client.methods.HttpGet;
//import org.apache.http.impl.client.CloseableHttpClient;
//import org.apache.http.impl.client.HttpClients;
//import org.apache.http.HttpResponse;

// httpclient 供android使用
import cz.msebera.android.httpclient.client.HttpClient;
import cz.msebera.android.httpclient.client.methods.HttpGet;
import cz.msebera.android.httpclient.client.methods.HttpPost;
import cz.msebera.android.httpclient.impl.client.CloseableHttpClient;
import cz.msebera.android.httpclient.impl.client.HttpClients;
import cz.msebera.android.httpclient.HttpResponse;

import org.apache.commons.io.IOUtils;

import java.io.IOException;
import java.io.InputStream;

public class LocalHttpClient {
	private static final String mVersion = "1.0.0";
	private static final String mRemoteAddr = "http://172.27.16.28:8080/api/v1/login";
	//private static final String mRemoteAddr = "https://www.baidu.com";

	public String getVersion() {
		return mVersion;
	}

	//
	// get过程
	public void doGetProcess() throws IOException {
		CloseableHttpClient httpClient = HttpClients.createDefault();
		// 创建一个Get请求
		HttpGet httpGet = new HttpGet(mRemoteAddr);
		//   HttpPost httpPost = new HttpPost("http://www.pingwest.com/feed/"); POST请求
		// 发出请求,并接受服务端相应
		//
		HttpResponse response = httpClient.execute(httpGet);

		// 获取Http状态码
		int statusCode = response.getStatusLine().getStatusCode();

		if (statusCode == 200) {
			// html 也就是获取相应输入流
			InputStream inputStream = response.getEntity().getContent();

			String result = IOUtils.toString(inputStream, "UTF-8");
			inputStream.close();
			System.out.println(result);

		} else {
			System.out.println("服务器异常" + statusCode);
		}
		httpClient.close();
	}

	// post过程
	public void doPostProcess() throws IOException {
		CloseableHttpClient httpClient = HttpClients.createDefault();
		// 创建一个Get请求
		HttpPost httpPost = new HttpPost(mRemoteAddr);




		HttpResponse response = httpClient.execute(httpPost);
	}
};
